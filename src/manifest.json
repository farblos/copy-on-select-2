// manifest.json - copy-on-select-2 manifest.
//
// Copyright (C) 2022-2024 Jens Schmidt
// Copyright (C) 2016 Bennett Roesch
//
// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this
// file, You can obtain one at https://mozilla.org/MPL/2.0/.
//
// This Source Code Form is “Incompatible With Secondary Licenses”, as
// defined by the Mozilla Public License, v. 2.0.
//
// SPDX-FileCopyrightText: 2022-2024 Jens Schmidt
// SPDX-FileCopyrightText: 2016 Bennett Roesch
//
// SPDX-License-Identifier: MPL-2.0-no-copyleft-exception

{
  "name": "[% addon_name %]",
  "description": "[% addon_desc %]",
[% IF (equal relmode "final") -%]
  "homepage_url": "[% addon_homepage %]",
[% ELSE -%]
  "homepage_url": "https://git.sr.ht/~jschmidt/copy-on-select-2/tree/[% branch %]/item/README.md",
[% END -%]

  "version": "[% version %]",

  // (sync-mark-min-version)
  "browser_specific_settings": {
[% IF (equal addontype "xpi") -%]
    "gecko": {
      "id": "[% addon_amo_id %]",
      "strict_min_version": "[% addon_strict_min_vers %]"
    }
[% END -%]
  },

  // provide icons for installation from package.  For
  // installation from AMO, FF uses the AMO-provided icons
  // (which are, incidentially, exactly the icons listed
  // below).
  "icons": {
    "32":  "copy-on-select-2-32.png",
    "64":  "copy-on-select-2-64.png",
    "128": "copy-on-select-2-128.png"
  },

  "permissions": [
    "storage",
    "clipboardWrite"
  ],

  "content_scripts": [
    {
      "matches": [
        "<all_urls>"
      ],
      "js": [
        "common.js",
        "copy-on-select.js"
      ],
      "all_frames": true,
      "run_at": "document_idle"
    }
  ],

[% IF (equal addontype "xpi") -%]
  "background": {
    "scripts": [
      "common.js",
      "background.js"
    ],
    "persistent": false
  },
[% ELSE -%]
  "background": {
    "service_worker": "service-worker.js"
  },
[% END -%]

  "options_ui": {
    "page": "options.html"
  },

[% IF (equal addontype "xpi") -%]
  "manifest_version": 2
[% ELSE -%]
  "manifest_version": 3
[% END -%]
}
